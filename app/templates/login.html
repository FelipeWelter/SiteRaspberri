{% extends "base.html" %}
{% block title %}Entrar · CL2/CL6{% endblock %}

{% block content %}
<style>
  /* ocupa a tela toda com a imagem */
  .login-wrapper {
    position: relative;
    min-height: calc(100vh - 56px); /* desconta a navbar se existir */
    background: url("{{ url_for('static', filename='img/login-bg.jpg') }}") center/cover no-repeat fixed;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  /* overlay escuro para contraste */
  .login-wrapper::before {
    content: "";
    position: absolute; inset: 0;
    background: linear-gradient(180deg, rgba(0,0,0,.35), rgba(0,0,0,.55));
  }
  /* cartão com glassmorphism */
  .login-card {
    position: relative;
    width: 100%;
    max-width: 420px;
    padding: 28px 24px;
    border-radius: 18px;
    background: rgba(255,255,255,0.12);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgba(255,255,255,0.25);
    box-shadow: 0 10px 30px rgba(0,0,0,.25);
    color: #fff;
  }
  .login-brand {
    display: flex; align-items: center; gap: 10px; margin-bottom: 10px;
  }
  .login-brand .dot {
    width: 14px; height: 14px; border-radius: 50%; background: #0d6efd;
    box-shadow: 0 0 10px rgba(13,110,253,.7);
  }
  .login-title {
    margin: 0; font-weight: 700; letter-spacing: .3px;
  }
  .form-label { color: #eaeaea; }
  .form-control, .form-select {
    background: rgba(255,255,255,.15); color: #fff; border: 1px solid rgba(255,255,255,.25);
  }
  .form-control::placeholder { color: #e0e0e0; opacity: .85; }
  .form-control:focus { background: rgba(255,255,255,.2); color: #fff; border-color: #9ec5fe; box-shadow: 0 0 0 .2rem rgba(13,110,253,.25); }
  .text-muted-light { color: #d6d6d6 !important; }
  .btn-primary { box-shadow: 0 6px 18px rgba(13,110,253,.35); }
  .tiny { font-size: .9rem; }
  .toggle-pwd {
    position: absolute; right: 12px; top: 36px; cursor: pointer; user-select: none; color: #eaeaea;
  }
</style>

<div class="login-wrapper">
  <div class="login-card">
    <div class="login-brand">
      <span class="dot"></span>
      <h5 class="login-title">Sistema de Controle De Material </br> 4ª Seção - 6ª Cia Com Mec</h5>
    </div>
    <p class="text-muted-light tiny mb-3">Acesse com seu usuário e senha.</p>

    <form method="post">
      <!-- se você tiver CSRF via Flask-WTF, descomente a linha abaixo -->
      <!-- {{ form.csrf_token if form is defined }} -->

      <div class="mb-3">
        <label class="form-label" for="username">Usuário</label>
        <input class="form-control" id="username" name="username" placeholder="ex: SgtRibeiro" autofocus>
      </div>

      <div class="mb-3 position-relative">
        <label class="form-label" for="password">Senha</label>
        <input class="form-control" id="password" name="password" type="password" placeholder="************">
        <span class="toggle-pwd tiny" onclick="togglePwd()">mostrar</span>
      </div>

      <div class="d-grid gap-2">
        <button class="btn btn-primary btn-lg" type="submit">Entrar</button>
      </div>

      <div class="mt-3 d-flex justify-content-between tiny text-muted-light">
        <span>© {{ config.get('APP_NAME', '4Sec') }}</span>
        <span>v{{ config.get('APP_VERSION', '1.2.4') }}</span>
      </div>
    </form>
  </div>
</div>


<script>
  function togglePwd(){
    const i = document.getElementById('password');
    const t = document.querySelector('.toggle-pwd');
    if(i.type === 'password') { i.type = 'text'; t.textContent = 'ocultar'; }
    else { i.type = 'password'; t.textContent = 'mostrar'; }
  }
</script>
{% endblock %}
